<!DOCTYPE html>
<html>
  <head> 
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> 
  </script> 
  </head>

  <select id = "select_method">
    <option value ="GET">GET</option>
    <option value ="POST">POST</option>
    <option value ="PUT">PUT</option>
  </select>
  <input type="text" id = "URL" placeholder="URL" >
  <button type="submit" onclick="submitReq()">Submit</button>
  <div class="wrapper_field">
    <div class="key-value-pair">
      <input type="text" class = "key" placeholder="key1" id = "11" >
      <input type="text" class = "value" placeholder="value1" id = "12" >
    </div>
  </div>
  <div>
    <button type="button" class="add_field_button">Add Row</button>
    <button type="button" class="remove_field_button">Remove Row</button>
  </div>
  

  <script>
    var max_fields      = 10;
    var wrapper         = $(".wrapper_field"); 
    var total_fields = wrapper.length;
    //var add_button      = $(".add_field_button");
    //var remove_button   = $(".remove_field_button");

    $(".add_field_button").click(function(e){
        e.preventDefault();
        //var wrapper  = $(".wrapper_field"); 
        if(total_fields < max_fields){
            total_fields++;
        $(".wrapper_field").append('<div class = "key-value-pair"><input type="text" class = "key" placeholder="key'+total_fields+'" id = '+total_fields+'1> <input type="text" class = "value" placeholder="value'+total_fields+'" id = '+total_fields+'2></div>');
      }
      //return false;
    });
    $(".remove_field_button").click(function(e){
      e.preventDefault();
      var total_fields = wrapper[0].childNodes.length;
      if(total_fields>1){
        wrapper[0].childNodes[total_fields-1].remove();
        total_fields--;
      }
      //return false;
    });
    function submitReq() {
        var para_length = document.getElementsByClassName("key-value-pair").length;//key-value-pair length
        var ajax_object = {};//
        var key = "";
        var value = "";
        var ajax_url = "";
        var method = "";
        for (var i = 1; i <= para_length; i++) { 
           var id_key = 10*i+1;
           var id_value = 10*i+2;
           key = document.getElementById(id_key.toString()).value;
           value = document.getElementById(id_value.toString()).value;
           ajax_object[key] = value;
           //console.log(key);
           //console.log(value);
        }
        console.log(ajax_object)
        ajax_url = document.getElementById("URL").value;
        console.log(ajax_url);
        var myselect = document.getElementById("select_method");
        var index = myselect.selectedIndex;
        method = myselect.options[index].value;
        console.log(method);

        //ajax http request
        var html = $.ajax({
               url: ajax_url,
               data: ajax_object,
               method: method,
               async: true
            }).responseText;
        console.log(html);
    }
  </script>

</html>